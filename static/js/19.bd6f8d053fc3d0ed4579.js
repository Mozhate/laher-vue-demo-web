webpackJsonp([19],{tqlH:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={checkData:(t,i)=>!(!t||!i)&&("String"===t?"string"==typeof i:"Object"===t?"[object Object]"===Object.prototype.toString.call(i):"number"===t?"number"==typeof i:"function"===t&&"[object Function]"===Object.prototype.toString.call(i)),searchArrObj:(t,i,o)=>t.findIndex(t=>t[i]===o)};var e=class{constructor(t="默认标题",i={}){this.title=t,this.options=i,this.support=!1,this.supportFn()}supportFn(){window.Notification?(this.initStatus(),this.support=!0):this.support=!1}initStatus(){this.notification=null,this.state=Notification.permission,this.msg=null,this.callBackObj={},this.notificationAll=[],this.requireInteractionTimeout=!1,this.timeout=null}initNotification(t){if(this.checkStatus("support")){if(!n.checkData("function",t))return console.error("initNotification的参数必须为函数");if("granted"===this.state)this.msg="already granted";else if("default"===this.state){const i=i=>(this.state=i,this.msg="granted"===i?"granted":"default"===i?"close":"denied",t(this.msg));try{Notification.requestPermission().then(i)}catch(t){Notification.requestPermission(i)}}else this.msg="already denied";return"default"!==this.state?t(this.msg):void 0}}userAgreed(){if(this.checkStatus("userAgreed")){this.notification=new Notification(this.title,this.options),this.notificationWatch();for(const t in this.callBackObj)this.notification[t]=(i=>{this.callBackObj[t](i)})}}notificationTimeoutFn(t){t&&n.checkData("number",t)?this.timeout=t:this.timeout=5e3}notificationWatch(){this.notificationAll.push(this.notification),this.notification.requireInteraction?this.everyTimeout():this.autoClose(),this.watchClose()}everyTimeout(){n.checkData("number",this.timeout)&&(this.options.timeOut&&n.checkData("number",this.options.timeOut)?this.timeoutCloseFn(this.options.timeOut):this.timeoutCloseFn(this.timeout))}timeoutCloseFn(t){const i=this.notification.timestamp;setTimeout(()=>{const t=n.searchArrObj(this.notificationAll,"timestamp",i);-1!==t&&this.notificationAll[t].close()},t)}watchClose(){const t=this.notification.timestamp;this.notification.addEventListener("close",i=>{const o=n.searchArrObj(this.notificationAll,"timestamp",t);-1!==o&&this.notificationAll.splice(o,1)})}autoClose(){const t=this.notification.timestamp;setTimeout(()=>{const i=n.searchArrObj(this.notificationAll,"timestamp",t);-1!==i&&this.notificationAll.splice(i,1)},6e3)}notificationEvent(t){if(this.checkStatus("support")){if(!n.checkData("Object",t))return console.error("callObj必须为对象");for(const i in t)if(!n.checkData("function",t[i]))return console.error("callObj对象中的每个value必须为函数");this.callBackObj=t}}closeAll(){for(let t of this.notificationAll.values())t.close();this.notificationAll=[]}close(){if(!this.notification)return console.warn("this.notification为null,通知尚未调用/用户未同意显示通知");this.notification.close()}updateOptions(t){if(t&&n.checkData("Object",t))for(const i in t)this.options[i]=t[i];else console.warn("updateOptions参数错误：options为必填对象")}replaceTitle(t){t&&n.checkData("String",t)?this.title=t:console.warn("replaceTitle: title(通知标题)为必填字符串")}replaceOptions(t){t&&n.checkData("Object",t)?this.options=t:console.warn("replaceOptions参数错误：options为必填对象")}checkStatus(t){if("support"===t){if(!this.support)return console.warn("用户浏览器不支持"),!1}else if("userAgreed"===t){if("granted"!==this.state)return!1;if(!this.checkStatus("support"))return!1}return!0}},s={name:"home",data:function(){return{notificationClass:null,showNatification:null}},methods:{requestPermission:function(){var t=this;return this.notificationClass.initNotification(function(i){"already granted"!==i&&"granted"!==i||t.notificationClass.userAgreed()})}},mounted:function(){if(this.notificationClass=new e("通知",{dir:"rtl",body:"下周1之前给到艳姐考情记录，6L的也要，钟子奇的组长调休下周一会来"}),this.notificationClass.support)return this.notificationClass.notificationEvent({onclick:function(t){console.log("点击通知打开百度",t),window.open("https://www.baidu.com/","_blank")},onshow:function(t){console.log("显示",t)},onerror:function(t){console.log("错误",t)},onclose:function(t){console.log("用户关闭通知",t)}}),this.requestPermission();console.log("当前浏览器版本不支持natification,建议升级你的浏览器")}},c={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"home"},[i("h1",{on:{click:this.requestPermission}},[this._v("点击显示通知")])])},staticRenderFns:[]},a=o("VU/8")(s,c,!1,null,null,null);i.default=a.exports}});
//# sourceMappingURL=19.bd6f8d053fc3d0ed4579.js.map