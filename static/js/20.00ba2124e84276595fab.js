webpackJsonp([20],{tqlH:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={checkData:(t,i)=>!(!t||!i)&&("String"===t?"string"==typeof i:"Object"===t?"[object Object]"===Object.prototype.toString.call(i):"number"===t?"number"==typeof i:"function"===t&&"[object Function]"===Object.prototype.toString.call(i)),searchArrObj:(t,i,s)=>t.findIndex(t=>t[i]===s)};var n=class{constructor(t="默认标题",i={}){this.title=t,this.options=i,this.support=!1,this.supportFn()}supportFn(){window.Notification?(this.initStatus(),this.support=!0):this.support=!1}initStatus(){this.notification=null,this.state=Notification.permission,this.msg=null,this.callBackObj={},this.notificationAll=[],this.requireInteractionTimeout=!1,this.timeout=null}initNotification(t){if(this.checkStatus("support")&&o.checkData("function",t)){if("granted"===this.state)this.msg="already granted";else if("default"===this.state){const i=i=>(this.state=i,this.msg="granted"===i?"granted":"default"===i?"close":"denied",t(this.msg));try{Notification.requestPermission().then(i)}catch(t){Notification.requestPermission(i)}}else this.msg="already denied";return"default"!==this.state?t(this.msg):void 0}}userAgreed(){if(this.checkStatus("userAgreed")){this.notification=new Notification(this.title,this.options),this.notificationWatch();for(const t in this.callBackObj)this.notification[t]=(i=>{this.callBackObj[t](i)})}}notificationTimeoutFn(t){t&&o.checkData("number",t)?this.timeout=t:this.timeout=5e3}notificationWatch(){this.notificationAll.push(this.notification),this.notification.requireInteraction?this.everyTimeout():this.autoClose(),this.watchClose()}everyTimeout(){o.checkData("number",this.timeout)&&(this.options.timeOut&&o.checkData("number",this.options.timeOut)?this.timeoutCloseFn(this.options.timeOut):this.timeoutCloseFn(this.timeout))}timeoutCloseFn(t){const i=this.notification.timestamp;setTimeout(()=>{const t=o.searchArrObj(this.notificationAll,"timestamp",i);-1!==t&&this.notificationAll[t].close()},t)}watchClose(){const t=this.notification.timestamp;this.notification.addEventListener("close",i=>{const s=o.searchArrObj(this.notificationAll,"timestamp",t);-1!==s&&this.notificationAll.splice(s,1)})}autoClose(){const t=this.notification.timestamp;setTimeout(()=>{const i=o.searchArrObj(this.notificationAll,"timestamp",t);-1!==i&&this.notificationAll.splice(i,1)},6e3)}notificationEvent(t){if(this.checkStatus("support")&&o.checkData("Object",t)){for(const i in t)if(!o.checkData("function",t[i]))return;this.callBackObj=t}}closeAll(){for(let t of this.notificationAll.values())t.close();this.notificationAll=[]}close(){this.notification&&this.notification.close()}updateOptions(t){if(t&&o.checkData("Object",t))for(const i in t)this.options[i]=t[i]}replaceTitle(t){t&&o.checkData("String",t)&&(this.title=t)}replaceOptions(t){t&&o.checkData("Object",t)&&(this.options=t)}checkStatus(t){if("support"===t){if(!this.support)return!1}else if("userAgreed"===t){if("granted"!==this.state)return!1;if(!this.checkStatus("support"))return!1}return!0}},e={name:"home",data:function(){return{notificationClass:null,showNatification:null}},methods:{requestPermission:function(){var t=this;return this.notificationClass.initNotification(function(i){"already granted"!==i&&"granted"!==i||t.notificationClass.userAgreed()})}},mounted:function(){if(this.notificationClass=new n("通知",{dir:"rtl",body:"哈哈哈"}),this.notificationClass.support)return this.notificationClass.notificationEvent({onclick:function(t){window.open("https://www.baidu.com/","_blank")},onshow:function(t){},onerror:function(t){},onclose:function(t){}}),this.requestPermission()}},c={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"home"},[i("h1",{on:{click:this.requestPermission}},[this._v("点击显示通知")])])},staticRenderFns:[]},a=s("VU/8")(e,c,!1,null,null,null);i.default=a.exports}});